{"version":3,"sources":["components/OrderList/OrderList.module.css","components/OrderListItem/OrderListItem.module.css","assets/img/remove_order_item_button.svg","pages/OrderPage/OrderPage.module.css","components/OrderForm/OrderForm.module.css","redux/local/localSelectors.js","components/OrderListItem/OrderListItem.js","components/OrderList/OrderList.js","components/OrderList/OrderListContainer.js","components/OrderForm/OrderForm.js","pages/OrderPage/OrderPage.js"],"names":["module","exports","getLocal","state","local","lang","OrdersListItem","name","id","img","ingredients","price","onIncrementItem","onDecrementItem","onRemoveItem","itemsCount","type","useSelector","localSelectors","ingredientsList","map","item","join","className","styles","orderItemCard","src","alt","itemImg","deleteButton","onClick","closeBtn","contentWrapper","productName","ingredientsText","orderDetailsWrapper","priceText","currencyText","pizzaSize","amountContainer","decrementBtn","amountNumber","incrementBtn","OrderList","deleteProdToOrderList","incrementItemsCount","decrementItemsCount","userOrder","orders","userOrderList","productsList","orderListPrice","reduce","sum","productprice","getSum","length","orderListContainer","orderListTitle","orderList","productId","productImg","productIngredients","OrderListItem","key","orderListToPayText","orderListPriceCurrency","orderListEmpty","mapDispatchToProps","orderOperations","connect","orderSelectors","getUserOrder","OrderForm","dispatch","useDispatch","isAuthenticated","authSelectors","creator","getUserId","getUserName","sumToPay","useState","phone","setPhone","city","setCity","street","setStreet","house","setHouse","orderTime","setOrderTime","useEffect","contactForm","onSubmit","e","preventDefault","deliveryAddress","orderObject","addOrder","Date","toLocaleTimeString","slice","value","placeholder","languages","input","onChange","target","required","htmlFor","label","submit","OrderPage","OrderPageContainer","line"],"mappings":"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","file":"static/js/14.8854a47e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"secondaryHeaderFontSize\":\"1.5 rem\",\"primaryHeaderFontSize\":\"2.25 rem\",\"accentColor\":\"#FF6C00\",\"thirdHeaderFontStyle\":\"1.88 rem\",\"orderListContainer\":\"OrderList_orderListContainer__37qkT\",\"orderList\":\"OrderList_orderList__3d_jE\",\"orderListPrice\":\"OrderList_orderListPrice__1cF6u\",\"orderListPriceCurrency\":\"OrderList_orderListPriceCurrency__2JeIL\",\"orderListToPayText\":\"OrderList_orderListToPayText__DZr_h\",\"orderListTitle\":\"OrderList_orderListTitle__28NDA\",\"orderListEmpty\":\"OrderList_orderListEmpty__uP7vJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"variables\":\"'../../stylesheet/vars.css'\",\"accentColor\":\"#FF6C00\",\"lightColor\":\"#FFF\",\"secondaryTextFontSize\":\"1.25 rem\",\"orderItemCard\":\"OrderListItem_orderItemCard__2iYfk\",\"deleteButton\":\"OrderListItem_deleteButton__2GUqL\",\"itemImg\":\"OrderListItem_itemImg__3wbox\",\"productName\":\"OrderListItem_productName__3msjH\",\"ingredientsText\":\"OrderListItem_ingredientsText__3n_py\",\"orderDetailsWrapper\":\"OrderListItem_orderDetailsWrapper__2YGNn\",\"priceText\":\"OrderListItem_priceText__2gAGp\",\"currencyText\":\"OrderListItem_currencyText__AqVxl\",\"amountContainer\":\"OrderListItem_amountContainer__9CgrM\",\"decrementBtn\":\"OrderListItem_decrementBtn__cKwMs\",\"incrementBtn\":\"OrderListItem_incrementBtn__2RQlc\",\"amountNumber\":\"OrderListItem_amountNumber__3cuk6\",\"pizzaSize\":\"OrderListItem_pizzaSize__17DF1\",\"imgContainer\":\"OrderListItem_imgContainer__3ycbF\",\"contentWrapper\":\"OrderListItem_contentWrapper__3A4AM\"};","module.exports = __webpack_public_path__ + \"static/media/remove_order_item_button.56fe91b0.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"borderColor\":\"rgba(39, 39, 39, 0.1)\",\"primaryHeaderFontSize\":\"2.25 rem\",\"primaryTextFontSize\":\"0.875 rem\",\"list\":\"OrderPage_list__1iPI3\",\"OrderPageContainer\":\"OrderPage_OrderPageContainer__mwCEv\",\"line\":\"OrderPage_line__3Wr5q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contactForm\":\"OrderForm_contactForm__2cW1W\",\"input\":\"OrderForm_input__svMR6\",\"label\":\"OrderForm_label__3_HB8\",\"submit\":\"OrderForm_submit__25egP\"};","export const getLocal = (state) => state.local.lang;\r\n\r\nexport default { getLocal };\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport styles from \"./OrderListItem.module.css\";\r\nimport closeBtn from \"../../assets/img/remove_order_item_button.svg\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { localSelectors } from \"../../redux/local\";\r\n\r\nconst OrdersListItem = ({\r\n  name,\r\n  id,\r\n  img,\r\n  ingredients,\r\n  price,\r\n  onIncrementItem,\r\n  onDecrementItem,\r\n  onRemoveItem,\r\n  itemsCount,\r\n  type,\r\n}) => {\r\n  const local = useSelector((state) => localSelectors.getLocal(state));\r\n  const ingredientsList = ingredients\r\n    .map((item) => [item.name[local]])\r\n    .join(\", \");\r\n\r\n  //TODO make \"type\" block in item\r\n  return (\r\n    <li className={styles.orderItemCard}>\r\n      <img src={img} alt={name} className={styles.itemImg} />\r\n      <button\r\n        type=\"button\"\r\n        className={styles.deleteButton}\r\n        onClick={() => onRemoveItem({ id, type })}\r\n      >\r\n        <img src={closeBtn} alt=\"delete-btn\" />\r\n      </button>\r\n\r\n      <div className={styles.contentWrapper}>\r\n        <h5 className={styles.productName}>{name[local]}</h5>\r\n        <p className={styles.ingredientsText}>{ingredientsList}</p>\r\n        <div className={styles.orderDetailsWrapper}>\r\n          <p className={styles.priceText}>\r\n            {price}\r\n            <span className={styles.currencyText}>\r\n              <FormattedMessage id=\"grn\" />\r\n            </span>\r\n          </p>\r\n          {typeof type === \"string\" ? (\r\n            <div className={styles.pizzaSize}>{type}</div>\r\n          ) : (\r\n            <></>\r\n          )}\r\n          <div className={styles.amountContainer}>\r\n            <button\r\n              className={styles.decrementBtn}\r\n              onClick={() => onDecrementItem({ id, type })}\r\n            >\r\n              -\r\n            </button>\r\n            <p className={styles.amountNumber}>{itemsCount}</p>\r\n            <button\r\n              className={[styles.decrementBtn, styles.incrementBtn].join(\" \")}\r\n              onClick={() => onIncrementItem({ id, type })}\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default OrdersListItem;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n// import { orderOperations } from \"../../redux/order\";\r\nimport styles from \"./OrderList.module.css\";\r\nimport OrderListItem from \"../OrderListItem/OrderListItem\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n// import orderItems from \"../../services/orderItems.json\";\r\n\r\n// const getOrderTime = () => new Date().toLocaleTimeString().slice(0, -3);\r\n\r\n//TODO edit to hooks\r\nconst OrderList = ({\r\n  deleteProdToOrderList,\r\n  incrementItemsCount,\r\n  decrementItemsCount,\r\n}) => {\r\n  const userOrder = useSelector(\r\n    (state) => state.orders.userOrderList.productsList\r\n  );\r\n\r\n  const getSum = (userOrder) => {\r\n    return userOrder.reduce(function (sum, { itemsCount, productprice }) {\r\n      return sum + itemsCount * productprice;\r\n    }, 0);\r\n  };\r\n\r\n  const orderListPrice = getSum(userOrder);\r\n\r\n  return userOrder.length > 0 ? (\r\n    <div className={styles.orderListContainer}>\r\n      <h2 className={styles.orderListTitle}>\r\n        <FormattedMessage id=\"order\" />\r\n      </h2>\r\n      <ul className={styles.orderList}>\r\n        {userOrder.map(\r\n          ({\r\n            productId,\r\n            productName,\r\n            productprice,\r\n            productImg,\r\n            itemsCount,\r\n            productIngredients,\r\n            type,\r\n          }) => (\r\n            <OrderListItem\r\n              key={productId + productprice}\r\n              id={productId}\r\n              img={productImg}\r\n              name={productName}\r\n              price={productprice}\r\n              ingredients={productIngredients}\r\n              itemsCount={itemsCount}\r\n              onRemoveItem={deleteProdToOrderList}\r\n              onIncrementItem={incrementItemsCount}\r\n              onDecrementItem={decrementItemsCount}\r\n              type={type}\r\n            />\r\n          )\r\n        )}\r\n      </ul>\r\n      <p className={styles.orderListPrice}>\r\n        <span className={styles.orderListToPayText}>\r\n          <FormattedMessage id=\"orders.sumToPay\" />\r\n        </span>\r\n        {orderListPrice || \"0\"}\r\n        <span className={styles.orderListPriceCurrency}>\r\n          <FormattedMessage id=\"grn\" />\r\n        </span>\r\n      </p>\r\n    </div>\r\n  ) : (\r\n    <h2 className={styles.orderListEmpty}>\r\n      <FormattedMessage id=\"orders.empty\" />\r\n    </h2>\r\n  );\r\n};\r\n\r\nexport default OrderList;\r\n// class orderList extends Component {\r\n// getSum = (userOrderList) => {\r\n//   return userOrderList.reduce(function (sum, { itemsCount, productprice }) {\r\n//     return sum + itemsCount * productprice;\r\n//   }, 0);\r\n// };\r\n//   render() {\r\n//     const orderItems = this.props.userOrderList;\r\n//     const orderListPrice = this.getSum(orderItems);\r\n//     return (\r\n//       <div className={styles.orderList}>\r\n//         <h2 className={styles.orderListTitle}>Ваш заказ</h2>\r\n//         <ul>\r\n//           {orderItems.map(\r\n//             ({ productId, productName, productprice, product, itemsCount }) => (\r\n//               <OrderListItem\r\n//                 key={productId}\r\n//                 img={product.images}\r\n//                 name={productName}\r\n//                 price={productprice}\r\n//                 ingredients={product.ingredients}\r\n//                 itemsCount={itemsCount}\r\n//               />\r\n//             )\r\n//           )}\r\n//         </ul>\r\n//         <p className={styles.orderListPrice}>\r\n//           {orderListPrice || \"0\"}\r\n//           <span className={styles.orderListPriceCurrency}> грн.</span>\r\n//         </p>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n","import { connect } from \"react-redux\";\r\n\r\nimport OrderList from \"./OrderList\";\r\nimport { orderOperations, orderSelectors } from \"../../redux/order\";\r\nimport { getLocal } from \"../../redux/local/localSelectors\";\r\n\r\n// class OrderListContainer extends Component {\r\n//   render() {\r\n//     return <OrderList {...this.props} />;\r\n//   }\r\n// }\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userOrderList: orderSelectors.getUserOrder(state),\r\n    local: getLocal(state),\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  deleteProdToOrderList: orderOperations.deleteProdToOrderList,\r\n  incrementItemsCount: orderOperations.incrementItemsCount,\r\n  decrementItemsCount: orderOperations.decrementItemsCount,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderList);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { orderOperations, orderSelectors } from \"../../redux/order\";\r\nimport { authSelectors } from \"../../redux/auth\";\r\nimport getSum from \"../utils/getSum\";\r\nimport styles from \"./OrderForm.module.css\";\r\nimport languages from \"../../languages\";\r\n\r\nconst getOrderTime = () => new Date().toLocaleTimeString().slice(0, -3);\r\n\r\nexport default function OrderForm() {\r\n  const dispatch = useDispatch();\r\n  const isAuthenticated = useSelector((state) =>\r\n    authSelectors.isAuthenticated(state)\r\n  );\r\n  const local = useSelector((state) => state.local.lang);\r\n\r\n  const creator = useSelector((state) => authSelectors.getUserId(state));\r\n  const name = useSelector((state) => authSelectors.getUserName(state));\r\n  const productsList = useSelector((state) =>\r\n    orderSelectors.getUserOrder(state)\r\n  );\r\n\r\n  const sumToPay = getSum(productsList);\r\n\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [city, setCity] = useState(\"\");\r\n  const [street, setStreet] = useState(\"\");\r\n  const [house, setHouse] = useState(\"\");\r\n  const [orderTime, setOrderTime] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (productsList.length > 0) {\r\n      setOrderTime(null);\r\n    }\r\n  }, [productsList]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const deliveryAddress = `${city}, ${street}, ${house}`;\r\n\r\n    const orderObject = {\r\n      creator,\r\n      productsList,\r\n      deliveryAddress,\r\n      sumToPay,\r\n      phone,\r\n      name,\r\n    };\r\n\r\n    dispatch(orderOperations.addOrder({ orderObject }));\r\n\r\n    setPhone(\"\");\r\n    setCity(\"\");\r\n    setStreet(\"\");\r\n    setHouse(\"\");\r\n\r\n    setOrderTime(getOrderTime());\r\n  };\r\n\r\n  const handleChangeNumber = ({ target: { value } }) => {\r\n    setPhone(value);\r\n  };\r\n  const handleChangeCity = ({ target: { value } }) => {\r\n    setCity(value);\r\n  };\r\n  const handleChangeStreet = ({ target: { value } }) => {\r\n    setStreet(value);\r\n  };\r\n  const handleChangeHouse = ({ target: { value } }) => {\r\n    setHouse(value);\r\n  };\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <h3>\r\n        <FormattedMessage id=\"notAuthenticated\" />\r\n      </h3>\r\n    );\r\n  }\r\n\r\n  if (isAuthenticated && orderTime === null && productsList.length > 0) {\r\n    return (\r\n      <form className={styles.contactForm} onSubmit={handleSubmit}>\r\n        {/* <div className={styles.formContainer}> */}\r\n        <input\r\n          type=\"number\"\r\n          id=\"dynamic-label-input\"\r\n          value={phone}\r\n          name=\"phone\"\r\n          placeholder={languages[local][\"phone number\"]}\r\n          className={styles.input}\r\n          onChange={handleChangeNumber}\r\n          required\r\n        />\r\n        <label htmlFor=\"dynamic-label-input\" className={styles.label}>\r\n          <FormattedMessage id=\"phone number\" />\r\n        </label>\r\n        {/* </div> */}\r\n        {/* <div className={styles.formContainer}> */}\r\n        <input\r\n          type=\"text\"\r\n          id=\"dynamic-label-input\"\r\n          value={city}\r\n          name=\"city\"\r\n          placeholder={languages[local].city}\r\n          className={styles.input}\r\n          onChange={handleChangeCity}\r\n        />\r\n        <label htmlFor=\"dynamic-label-input\" className={styles.label}>\r\n          <FormattedMessage id=\"city\" />\r\n        </label>\r\n        {/* </div> */}\r\n        {/* <div className={styles.formContainer}> */}\r\n        <input\r\n          type=\"text\"\r\n          id=\"dynamic-label-input\"\r\n          value={street}\r\n          name=\"street\"\r\n          placeholder={languages[local].street}\r\n          className={styles.input}\r\n          onChange={handleChangeStreet}\r\n        />\r\n        <label htmlFor=\"dynamic-label-input\" className={styles.label}>\r\n          <FormattedMessage id=\"street\" />\r\n        </label>\r\n        {/* </div> */}\r\n        {/* <div className={styles.formContainer}> */}\r\n        <input\r\n          type=\"text\"\r\n          id=\"dynamic-label-input\"\r\n          value={house}\r\n          name=\"house\"\r\n          placeholder={languages[local].house}\r\n          className={styles.input}\r\n          onChange={handleChangeHouse}\r\n        />\r\n        <label htmlFor=\"dynamic-label-input\" className={styles.label}>\r\n          <FormattedMessage id=\"house\" />\r\n        </label>\r\n        {/* </div> */}\r\n        <button className={styles.submit} type=\"submit\">\r\n          <FormattedMessage id=\"order2\" />\r\n        </button>\r\n      </form>\r\n    );\r\n  } else if (orderTime !== null) {\r\n    return (\r\n      <h3>\r\n        <FormattedMessage id=\"orders.appliedAt\" />\r\n        {orderTime} <FormattedMessage id=\"orders.wait\" />\r\n      </h3>\r\n    );\r\n  } else return <></>;\r\n}\r\n\r\n// if (orderTime !== null) {\r\n//   return (\r\n//     <h3>Ваш заказ принят в {orderTime}, ожидайте курьера в течении часа</h3>\r\n//   );\r\n// }\r\n// if (!isAuthenticated) {\r\n//   return <h3>Чтобы оформить заказ, нужно авторизоваться</h3>;\r\n// }\r\n\r\n// !isAuthenticated ? (\r\n//   <h3>Чтобы оформить заказ, нужно авторизоваться</h3>\r\n// ) : (\r\n//   <h3>Ваш заказ принят в {orderTime}, ожидайте курьера в течении часа</h3>\r\n// );\r\n","import React from \"react\";\r\nimport OrderList from \"../../components/OrderList\";\r\nimport styles from \"./OrderPage.module.css\";\r\nimport OrderForm from \"../../components/OrderForm\";\r\n\r\nconst OrderPage = () => {\r\n  return (\r\n    <div className={styles.OrderPageContainer}>\r\n      <hr className={styles.line} />\r\n      <OrderList />\r\n      <OrderForm />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderPage;\r\n"],"sourceRoot":""}