(this.webpackJsonppizza_project=this.webpackJsonppizza_project||[]).push([[17],{175:function(e,t,a){"use strict";var n=a(7),r=a(177);t.a={fetchProducts:function(){return function(e){e(n.a.productsRequest()),Object(r.f)().then((function(t){var a=t.data;return e(n.a.productsSuccess(a.products))})).catch((function(t){return e(n.a.productsError(t))}))}},fetchProductsByCategory:function(e){return function(t){t(n.a.byCategoryRequest()),Object(r.i)(e).then((function(e){var a=e.data;return t(n.a.byCategorySuccess(a.products))})).catch((function(e){return t(n.a.byCategoryError(e))}))}},fetchProductById:function(e){return function(t){t(n.a.byIdRequest()),Object(r.h)(e).then((function(e){var a=e.data;return t(n.a.byIdSuccess(a.product))})).catch((function(e){return t(n.a.byIdErrror(e))}))}},sendFile:function(e){return function(t){t(n.a.sendFileRequest()),Object(r.j)(e).then((function(e){var a=e.data;return t(n.a.sendFileSuccess(a.image.file))})).catch((function(e){return t(n.a.sendFileError(e))}))}},sendProduct:function(e){return function(t){t(n.a.sendProductRequest()),Object(r.k)(e).then((function(e){var a=e.data;return t(n.a.sendProductSuccess(a.product))})).catch((function(e){return t(n.a.sendProductError(e))}))}},getIngredients:function(){return function(e){e(n.a.getAllIngradientsRequest()),Object(r.e)().then((function(t){var a=t.data;return e(n.a.getAllIngradientsSuccess(a.ingredients))})).catch((function(t){return e(n.a.getAllIngradientsError(t))}))}},updateProduct:function(e,t){return function(a){a(n.a.updateProductRequest()),Object(r.o)(e,t).then((function(e){var t=e.data;return a(n.a.updateProductSuccess(t))})).catch((function(e){return a(n.a.updateProductError(e))}))}},deleteProduct:function(e){return function(t){t(n.a.deleteProductRequest()),Object(r.b)(e).then((function(e){var a=e.data;return t(n.a.deleteProductSuccess(a))})).catch((function(e){return t(n.a.deleteProductError(e))}))}},saveExistProdImg:function(e){return function(t){t(n.a.saveExistedImg(e))}}}},176:function(e,t,a){"use strict";t.a={getLoading:function(e){return e.products.loading},getError:function(e){return e.products.errorReducer},getProducts:function(e){return e.products.items},getFileLink:function(e){return e.products.fileLink},getIngradients:function(e){return e.products.ingradients},fileLink:function(e){return e.products.fileLink}}},177:function(e,t,a){"use strict";a.d(t,"d",(function(){return b})),a.d(t,"e",(function(){return l})),a.d(t,"k",(function(){return p})),a.d(t,"j",(function(){return E})),a.d(t,"f",(function(){return m})),a.d(t,"i",(function(){return s})),a.d(t,"h",(function(){return _})),a.d(t,"o",(function(){return f})),a.d(t,"b",(function(){return g})),a.d(t,"c",(function(){return L})),a.d(t,"m",(function(){return F})),a.d(t,"l",(function(){return v})),a.d(t,"n",(function(){return h})),a.d(t,"a",(function(){return I})),a.d(t,"g",(function(){return N}));var n=a(46),r=a.n(n),i=a(53),c=a(25),d=a.n(c),o=d.a.CancelToken.source(),u="https://evening-caverns-34846.herokuapp.com",m=function(){return d.a.get("/products")},s=function(e){return d.a.get('/products/?category="'.concat(e,'"'),{cancelToken:o.token})},_=function(e){return d.a.get("/products/".concat(e))},l=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.get("".concat(u,"/ingredients")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(e){return d.a.post("".concat(u,"/products"),e)},f=function(e,t){return d.a.put("/products/".concat(e),t)},g=function(e){return d.a.delete("/products/".concat(e))},E=function(){var e=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),e.abrupt("return",d.a.post("".concat(u,"/images"),a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){return d.a.get("/developers")},L=function(){return d.a.get("/promo")},F=function(e){return d.a.post("/images",e)},v=function(e){return d.a.post("/promo",e)},h=function(e,t){return d.a.put("/promo/".concat(e),t)},I=function(e){return d.a.delete("/promo/".concat(e))},N=function(e){return d.a.get("/promo/".concat(e))}},190:function(e,t,a){e.exports={container:"adminUpdateListItemEdit_container__3HLuE",spinnerBack:"adminUpdateListItemEdit_spinnerBack__i8bG6",editCard:"adminUpdateListItemEdit_editCard__21bL0",editCard__image:"adminUpdateListItemEdit_editCard__image__3bGof",editForm:"adminUpdateListItemEdit_editForm__b5-qw",editCard__title:"adminUpdateListItemEdit_editCard__title__3FVGH",editCard__titleName:"adminUpdateListItemEdit_editCard__titleName__1ZB1V",editCard__titleLang:"adminUpdateListItemEdit_editCard__titleLang__3A86I",editForm__inputLang:"adminUpdateListItemEdit_editForm__inputLang__3aBBj",editCard__photoLabel:"adminUpdateListItemEdit_editCard__photoLabel__3AqSD",editForm__photo:"adminUpdateListItemEdit_editForm__photo__4go7p",editForm__photoBtn:"adminUpdateListItemEdit_editForm__photoBtn__1ruwQ",editForm__inputCategory:"adminUpdateListItemEdit_editForm__inputCategory__2OUAK",editForm__ingredientsSelect:"adminUpdateListItemEdit_editForm__ingredientsSelect__3EQkl",editForm__ingredient:"adminUpdateListItemEdit_editForm__ingredient__158s2",editForm__ingredientName:"adminUpdateListItemEdit_editForm__ingredientName__2-5zy",editForm__ingredientsList:"adminUpdateListItemEdit_editForm__ingredientsList__1zUdX",editForm__addIngredientBtn:"adminUpdateListItemEdit_editForm__addIngredientBtn__1uTV_",editForm__ingredientBtnDel:"adminUpdateListItemEdit_editForm__ingredientBtnDel__3l5GB",editForm__ingredientBtnDelImage:"adminUpdateListItemEdit_editForm__ingredientBtnDelImage__2hey5",editForm__price:"adminUpdateListItemEdit_editForm__price__3l36G",editForm__priceInput:"adminUpdateListItemEdit_editForm__priceInput__2BURD",editForm__inputSinglePrice:"adminUpdateListItemEdit_editForm__inputSinglePrice__DZQgv",editForm__priceTitle:"adminUpdateListItemEdit_editForm__priceTitle__7VoSo",editForm__inputDescription:"adminUpdateListItemEdit_editForm__inputDescription__3l4iF",editForm__btnSubmit:"adminUpdateListItemEdit_editForm__btnSubmit__1COXz",confirmation:"adminUpdateListItemEdit_confirmation__1Kgwu adminUpdateListItemEdit_spinnerBack__i8bG6",confirmation__form:"adminUpdateListItemEdit_confirmation__form__1Ci1y",confirmation__formText:"adminUpdateListItemEdit_confirmation__formText__3uwty",confirmation__formBtnLink:"adminUpdateListItemEdit_confirmation__formBtnLink__1RKal",confirmation__formBtn:"adminUpdateListItemEdit_confirmation__formBtn__1R00J"}},244:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(45),i=a(43),c=a(0),d=a.n(c),o=a(11),u=a(172),m=a(18),s=a(12),_=a(190),l=a.n(_),p=function(e){var t=e.confirmMassage;return d.a.createElement("div",{className:l.a.confirmation},d.a.createElement("div",{className:l.a.confirmation__form},d.a.createElement("p",{className:l.a.confirmation__formText},t.massage),d.a.createElement(s.b,{to:"/admin/update-product",className:l.a.confirmation__formBtnLink},d.a.createElement("button",{type:"button",className:l.a.confirmation__formBtn},d.a.createElement(u.a,{id:"return back"}))),"del"===t.action||d.a.createElement("button",{type:"button",className:l.a.confirmation__formBtn},d.a.createElement(u.a,{id:"continue editing"}))))},f=a(47),g=a(176),E=a(175);t.default=function(){var e=Object(o.c)(),t=Object(m.h)(),a=null;a=t.state?t.state.product:JSON.parse(sessionStorage.getItem("editedItem"));var s=Object(o.d)((function(e){return e.local.lang})),_=Object(o.d)(g.a.getLoading),b=(Object(o.d)(g.a.getError),Object(c.useState)(!1)),L=Object(i.a)(b,2),F=L[0],v=L[1],h=Object(o.d)(g.a.fileLink),I=Object(c.useState)(a.name.ru),N=Object(i.a)(I,2),j=N[0],C=N[1],O=Object(c.useState)(a.name.en),y=Object(i.a)(O,2),S=y[0],U=y[1],k=Object(c.useState)(a.name.ukr),B=Object(i.a)(k,2),P=B[0],x=B[1],D=Object(c.useState)(a.subcategory),w=Object(i.a)(D,2),z=w[0],R=w[1],T=Object(c.useState)(a.price.price),q=Object(i.a)(T,2),A=q[0],G=q[1],M=Object(c.useState)({}),J=Object(i.a)(M,2),X=J[0],V=J[1],K=Object(c.useState)(a.price.M),Q=Object(i.a)(K,2),Z=Q[0],H=Q[1],W=Object(c.useState)(a.price.L),Y=Object(i.a)(W,2),$=Y[0],ee=Y[1],te=Object(c.useState)(a.price.XL),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],ie=Object(c.useState)(Object(r.a)(a.ingredients)),ce=Object(i.a)(ie,2),de=ce[0],oe=ce[1],ue=Object(c.useState)(0),me=Object(i.a)(ue,2),se=me[0],_e=me[1],le=Object(o.d)(g.a.getIngradients),pe=Object(c.useState)(a.description),fe=Object(i.a)(pe,2),ge=fe[0],Ee=fe[1];Object(c.useEffect)((function(){e(E.a.getIngredients())}),[e]),Object(c.useEffect)((function(){e(E.a.saveExistProdImg(a.images))}),[e]),Object(c.useEffect)((function(){"pizza"===a.categories?V({M:Z,L:$,XL:ne}):V({price:A})}),[Z,$,ne,A]);var be=function(){var e={ru:j,ukr:P,en:S},t=a.categories,n={images:h,price:X,name:e,categories:t,subcategory:z,ingredients:de};return"pizza"!==t&&(n.description=ge),n},Le=function(e){e.preventDefault();var t=de.findIndex((function(t){return t._id===e.target.dataset.id}));de.splice(t,1),oe(Object(r.a)(de))};return window.addEventListener("unload",(function(){var e=Object(n.a)({_id:a._id},be());sessionStorage.setItem("editedItem",JSON.stringify(e))})),d.a.createElement("div",{className:l.a.container},!_||d.a.createElement("div",{className:l.a.spinnerBack},d.a.createElement(f.a,null)),d.a.createElement("div",{className:l.a.editCard},d.a.createElement("img",{src:h,alt:a.closeUpImages,className:l.a.editCard__image}),d.a.createElement("form",{id:"editForm",onSubmit:function(t){t.preventDefault();var n=be();!function(t,a){e(E.a.updateProduct(t,a))}(a._id,n),v({massage:d.a.createElement(u.a,{id:"product updated"}),action:"edit"})},className:l.a.editForm},d.a.createElement("h4",{className:l.a.editCard__title},d.a.createElement(u.a,{id:"photo"})),d.a.createElement("label",{className:l.a.editCard__photoLabel},d.a.createElement("input",{type:"file",accept:"image/*",onChange:function(t){var a;t.preventDefault(),a=t.target.files[0],e(E.a.sendFile(a))},className:l.a.editForm__photo}),d.a.createElement("p",{className:l.a.editForm__photoBtn},d.a.createElement(u.a,{id:"upload"}))),d.a.createElement("h4",{className:l.a.editCard__title},d.a.createElement(u.a,{id:"product.name"})),d.a.createElement("div",{className:l.a.editCard__titleName},d.a.createElement("p",{className:l.a.editCard__titleLang},"ru"),d.a.createElement("input",{type:"text",value:j,onChange:function(e){return C(e.target.value)},className:l.a.editForm__inputLang}),d.a.createElement("p",{className:l.a.editCard__titleLang},"en"),d.a.createElement("input",{type:"text",value:S,onChange:function(e){return U(e.target.value)},className:l.a.editForm__inputLang}),d.a.createElement("p",{className:l.a.editCard__titleLang},"ukr"),d.a.createElement("input",{type:"text",value:P,onChange:function(e){return x(e.target.value)},className:l.a.editForm__inputLang})),d.a.createElement("h4",{className:l.a.editCard__title},d.a.createElement(u.a,{id:"product.category"})),d.a.createElement("p",null,a.categories),"pizza"===a.categories&&d.a.createElement(d.a.Fragment,null,d.a.createElement("h4",{className:l.a.editCard__title},d.a.createElement(u.a,{id:"product.subcategory"})),d.a.createElement("select",{value:z,onChange:function(e){return R(e.target.value)},className:l.a.editForm__inputCategory},le&&["classic","branded","premium"].map((function(e,t){return d.a.createElement("option",{key:t,value:e},e)}))),d.a.createElement("h4",{className:l.a.editCard__title},d.a.createElement(u.a,{id:"update.composition"})),d.a.createElement("ul",{className:l.a.editForm__ingredients},de.map((function(e,t){return d.a.createElement("li",{key:t,className:l.a.editForm__ingredient},d.a.createElement("span",{className:l.a.editForm__ingredientName},e.name[s]),d.a.createElement("button",{type:"button",onClick:Le,"data-id":e._id,className:l.a.editForm__ingredientBtnDel},d.a.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",className:l.a.editForm__ingredientBtnDelImage},d.a.createElement("path",{d:"M11.25 1.8075L10.1925 0.75L6 4.9425L1.8075 0.75L0.75 1.8075L4.9425 6L0.75 10.1925L1.8075 11.25L6 7.0575L10.1925 11.25L11.25 10.1925L7.0575 6L11.25 1.8075Z",fill:"#272727"}))))}))),d.a.createElement("h4",{className:l.a.editCard__title},d.a.createElement(u.a,{id:"update.addIngredient"})),d.a.createElement("label",{className:l.a.editForm__ingredientsSelect},d.a.createElement("select",{value:se,className:l.a.editForm__ingredientsList,onChange:function(e){return _e(e.target.value)}},le&&le.map((function(e,t){return d.a.createElement("option",{key:e._id,value:t},e.name[s])}))),d.a.createElement("button",{type:"button",onClick:function(){de.some((function(e){return le[se]._id===e._id}))||oe([].concat(Object(r.a)(de),[le[se]]))},className:l.a.editForm__addIngredientBtn},d.a.createElement(u.a,{id:"update.addToComposition"})))),d.a.createElement("h4",{className:l.a.editCard__title},d.a.createElement(u.a,{id:"product.price"})),"pizza"===a.categories?d.a.createElement("div",{className:l.a.editForm__price},d.a.createElement("h4",{className:l.a.editForm__priceTitle},"M"),d.a.createElement("input",{type:"text",value:Z,onChange:function(e){return H(e.target.value)},className:l.a.editForm__priceInput}),d.a.createElement("h4",{className:l.a.editForm__priceTitle},"L"),d.a.createElement("input",{type:"text",value:$,onChange:function(e){return ee(e.target.value)},className:l.a.editForm__priceInput}),d.a.createElement("h4",{className:l.a.editForm__priceTitle},"XL"),d.a.createElement("input",{type:"text",value:ne,onChange:function(e){return re(e.target.value)},className:l.a.editForm__priceInput})):d.a.createElement(d.a.Fragment,null,d.a.createElement("input",{type:"number",value:A,onChange:function(e){return G(e.target.value)},className:l.a.editForm__inputSinglePrice}),d.a.createElement("p",{className:l.a.editCard__title},d.a.createElement(u.a,{id:"volume weight"})),d.a.createElement("input",{type:"text",value:ge,onChange:function(e){return Ee(e.target.value)},className:l.a.editForm__inputDescription}))),d.a.createElement("button",{form:"editForm",type:"submit",name:"complete",className:l.a.editForm__btnSubmit},d.a.createElement(u.a,{id:"update.saveChanges"})),d.a.createElement("button",{form:"editForm",type:"submit",name:"delete",className:l.a.editForm__btnSubmit,onClick:function(t){t.preventDefault(),e(E.a.deleteProduct(a._id)),v({massage:d.a.createElement(u.a,{id:"deleted product"}),action:"del"})}},d.a.createElement(u.a,{id:"delete product"})),d.a.createElement("div",{onClick:function(){"del"===F.action||v(!1)}},F&&d.a.createElement(p,{confirmMassage:F}))))}}}]);
//# sourceMappingURL=17.28d823ae.chunk.js.map