(this.webpackJsonppizza_project=this.webpackJsonppizza_project||[]).push([[15],{217:function(e,t,n){e.exports={form:"AdminStocksEditor_form__2ZL6u",formInput:"AdminStocksEditor_formInput__3Z-js",title:"AdminStocksEditor_title__dbFUr",formButton:"AdminStocksEditor_formButton__7Bajw",uploadInput:"AdminStocksEditor_uploadInput__1June",fileUpload:"AdminStocksEditor_fileUpload__2Z4yn",fileUploadGreen:"AdminStocksEditor_fileUploadGreen__6qGnh AdminStocksEditor_fileUpload__2Z4yn",uploadLabel:"AdminStocksEditor_uploadLabel__23n8I",uploadSpan:"AdminStocksEditor_uploadSpan__3NF2W",fileName:"AdminStocksEditor_fileName__3UeXV"}},218:function(e,t,n){e.exports={card:"AdminStocksListItem_card__1TXfi",cardImg:"AdminStocksListItem_cardImg__20Hab",title:"AdminStocksListItem_title__1OB2D",description:"AdminStocksListItem_description__1a81e",id:"AdminStocksListItem_id__1muNy",buttonContainer:"AdminStocksListItem_buttonContainer__2aZrN",button:"AdminStocksListItem_button__2w_uy"}},219:function(e,t,n){e.exports={cardList:"AdminStocksList_cardList__3b81E"}},230:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var a=n(0),o=n.n(a),r=n(43),c=n(171),i=n(11),u=n(46),l=n(25),s=n.n(l),m=n(10);s.a.defaults.baseURL="https://evening-caverns-34846.herokuapp.com";var d={fetchStocks:function(){return function(e){e(m.a.getStocksRequest()),s.a.get("/promo").then((function(t){var n=t.data;return e(m.a.getStocksSuccess(n.promo))})).catch((function(t){return e(m.a.getStocksError(t))}))}},sendStock:function(e){return function(t){t(m.a.sendStockRequest()),s.a.post("/promo",e).then((function(e){var n=e.data;return t(m.a.sendStockSuccess(n.newPromo))})).catch((function(e){return t(m.a.sendStockError(e))}))}},updateStock:function(e,t){return function(n){n(m.a.updateStockRequest()),s.a.put("/promo/".concat(e),t).then((function(e){var t=e.data;return n(m.a.updateStockSuccess(t.updatedPromo))})).catch((function(e){return n(m.a.updateStockError(e))}))}},deleteStock:function(e){return function(t){t(m.a.deleteStockRequest()),s.a.delete("/promo/".concat(e),e).then((function(e){var n=e.data;return t(m.a.deleteStockSuccess(n.deletedPromo._id))})).catch((function(e){return t(m.a.deleteStockError(e))}))}},sendFile:function(e){return function(t){t(m.a.sendFileRequest()),s.a.post("/images",e).then((function(e){var n=e.data;return t(m.a.sendFileSuccess(n.image.file))})).catch((function(e){return t(m.a.sendFileError(e))}))}},getStockById:function(e){return function(t){t(m.a.getStockByIdRequest()),s.a.get("/promo/".concat(e)).then((function(e){var n=e.data;return t(m.a.getStockByIdSuccess(n.promo))})).catch((function(e){return t(m.a.getStockByIdError(e))}))}}},p=function(e){return e.stocks.items},f=function(e){return e.stocks.fileLink},k=function(e){return e.stocks.isLoading},S=function(e){return e.stocks.item},E=n(217),_=n.n(E);var b=function(){var e=document.getElementById("uploadeFile").value;e=e.replace(/\\/g,"/").split("/").pop(),document.getElementById("fileName").innerHTML="\u0418\u043c\u044f \u0444\u0430\u0439\u043b\u0430: "+e};var g={onSubmitFile:d.sendFile,onSubmit:d.sendStock,onCancel:m.a.cancelInput,onUpdate:d.updateStock},v=Object(i.b)((function(e){return{linkFile:f(e),isLoading:k(e),editStock:S(e)}}),g)((function(e){var t=e.onSubmitFile,n=e.onSubmit,i=e.onUpdate,l=e.onCancel,s=e.isLoading,m=e.linkFile,d=e.editStock,p=Object(a.useState)(null),f=Object(r.a)(p,2),k=f[0],S=f[1],E=Object(a.useState)(""),g=Object(r.a)(E,2),v=g[0],h=g[1],N=Object(a.useState)(""),I=Object(r.a)(N,2),j=I[0],L=I[1],O=Object(a.useState)(""),C=Object(r.a)(O,2),y=C[0],A=C[1],F=Object(a.useState)(""),B=Object(r.a)(F,2),U=B[0],R=B[1],D=Object(a.useState)(""),w=Object(r.a)(D,2),q=w[0],P=w[1],Z=Object(a.useState)(""),z=Object(r.a)(Z,2),G=z[0],T=z[1],x=Object(a.useState)(null),H=Object(r.a)(x,2),J=H[0],M=H[1];Object(a.useEffect)((function(){M(d),d&&(S(d.images),h(d.title.en),R(d.description.en),L(d.title.ru),P(d.description.ru),A(d.title.ukr),T(d.description.ukr))}),[d]);var X=function(e){e.preventDefault();var t={title:{en:v,ru:j,ukr:y},description:{en:U,ru:q,ukr:G},images:m};if("update"===e.target.name)return i(J._id,t),void V();n(t),V()},V=function(){S(null),h(""),R(""),L(""),P(""),A(""),T(""),document.getElementById("formStocks").reset(),document.getElementById("fileName").innerHTML="",l()};return o.a.createElement(o.a.Fragment,null,s&&o.a.createElement(u.a,null),o.a.createElement("form",{className:_.a.form,id:"formStocks"},o.a.createElement("div",{className:m?_.a.fileUploadGreen:_.a.fileUpload},o.a.createElement("label",{className:_.a.uploadLabel},o.a.createElement("input",{type:"file",name:"file",id:"uploadeFile",className:_.a.uploadInput,onChange:function(e){var n=e.target;b();var a=new FormData;a.append("file",n.files[0]),t(a)}}),o.a.createElement("span",{className:_.a.uploadSpan},k?"\u0444\u0430\u0439\u043b \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d":"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b"))),o.a.createElement("div",{id:"fileName",className:_.a.fileName}),o.a.createElement("div",null,o.a.createElement("h2",{className:_.a.title},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0430\u043a\u0446\u0438\u0438"),o.a.createElement("input",{name:"promoNameEn",id:"promoNameEn",placeholder:"Promo name on english",className:_.a.formInput,value:v,onChange:function(e){var t=e.target.value;return h(t)}}),o.a.createElement("input",{name:"promoNameRu",id:"promoNameRu",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0430\u043a\u0446\u0438\u0438 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c",className:_.a.formInput,value:j,onChange:function(e){var t=e.target.value;return L(t)}}),o.a.createElement("input",{name:"promoNameUkr",id:"promoNameUkr",placeholder:"\u041d\u0430\u0437\u0432\u0430 \u0430\u043a\u0446\u0456\u0457 \u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u043e\u044e",className:_.a.formInput,value:y,onChange:function(e){var t=e.target.value;return A(t)}})),o.a.createElement("div",null,o.a.createElement("h2",{className:_.a.title},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0430\u043a\u0446\u0438\u0438"),o.a.createElement("input",{name:"promoDescriptionEn",id:"promoDescriptionEn",placeholder:"Promo description on english",className:_.a.formInput,value:U,onChange:function(e){var t=e.target.value;return R(t)}}),o.a.createElement("input",{name:"promoDescriptionRu",id:"promoDescriptionRu",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0430\u043a\u0446\u0438\u0438 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c",className:_.a.formInput,value:q,onChange:function(e){var t=e.target.value;return P(t)}}),o.a.createElement("input",{name:"promoDescriptionUkr",id:"promoDescriptionUkr",placeholder:"\u041d\u0430\u0437\u0432\u0430 \u0430\u043a\u0446\u0456\u0457 \u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u043e\u044e",className:_.a.formInput,value:G,onChange:function(e){var t=e.target.value;return T(t)}})),m&&o.a.createElement("button",{type:"submit",name:"onSubmit",onClick:X,className:_.a.formButton},o.a.createElement(c.a,{id:"promo.send"})),d&&o.a.createElement("button",{type:"submit",name:"update",onClick:X,className:_.a.formButton},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u043a\u0446\u0438\u044e"),o.a.createElement("button",{type:"button",onClick:V,className:_.a.formButton},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443")))})),h=n(218),N=n.n(h);var I={onRemove:d.deleteStock,onChange:d.getStockById},j=Object(i.b)(null,I)((function(e){var t=e.images,n=e.title,a=e.description,r=e.id,c=e.onRemove,i=e.onChange;return o.a.createElement("div",{className:N.a.card},o.a.createElement("h1",{className:N.a.title},n.en),o.a.createElement("p",{className:N.a.description},a.en),o.a.createElement("h1",{className:N.a.title},n.ru),o.a.createElement("p",{className:N.a.description},a.ru),o.a.createElement("h1",{className:N.a.title},n.ukr),o.a.createElement("p",{className:N.a.description},a.ukr),o.a.createElement("p",{className:N.a.id},"ID: ",r),o.a.createElement("img",{src:t,alt:n,className:N.a.cardImg}),o.a.createElement("div",{className:N.a.buttonContainer},o.a.createElement("button",{type:"button",className:N.a.button,onClick:function(){return c(r)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u0446\u0438\u044e"),o.a.createElement("button",{type:"button",className:N.a.button,onClick:function(){return function(e){window.scrollTo(0,0),i(e)}(r)}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u043a\u0446\u0438\u044e")))})),L=n(219),O=n.n(L);var C={onFetchStocks:d.fetchStocks},y=Object(i.b)((function(e){return{elements:p(e)}}),C)((function(e){var t=e.elements,n=e.onFetchStocks,r=e.onChange;return Object(a.useEffect)((function(){n()}),[n]),t&&o.a.createElement("div",{className:O.a.cardList},t.map((function(e){var t=e.title,n=e.description,a=e.images,c=e._id;return o.a.createElement(j,{onChange:r,key:c,title:t,description:n,images:a,id:c})})))}));function A(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(v,null),o.a.createElement(y,null))}}}]);
//# sourceMappingURL=15.c1b781a1.chunk.js.map