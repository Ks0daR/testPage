(this.webpackJsonppizza_project=this.webpackJsonppizza_project||[]).push([[17],{175:function(e,t,n){"use strict";t.a={getLoading:function(e){return e.products.loading},getError:function(e){return e.products.errorReducer},getProducts:function(e){return e.products.items},getFileLink:function(e){return e.products.fileLink},getIngredients:function(e){return e.products.ingredients},createNewIngredient:function(e){return e.products.newIngredient},fileLink:function(e){return e.products.fileLink},addIngredient:function(e){return e.products.ingredient}}},176:function(e,t,n){"use strict";n.d(t,"e",(function(){return F})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return _})),n.d(t,"p",(function(){return g})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return v})),n.d(t,"n",(function(){return L})),n.d(t,"m",(function(){return I})),n.d(t,"o",(function(){return N})),n.d(t,"b",(function(){return h})),n.d(t,"h",(function(){return j}));var a=n(46),r=n.n(a),i=n(53),c=n(25),d=n.n(c),o=d.a.CancelToken.source(),u="https://evening-caverns-34846.herokuapp.com",m=function(){return d.a.get("/products")},s=function(e){return d.a.get('/products/?category="'.concat(e,'"'),{cancelToken:o.token})},_=function(e){return d.a.get("/products/".concat(e))},l=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.get("".concat(u,"/ingredients")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.post("".concat(u,"/ingredients"),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){return d.a.post("".concat(u,"/products"),e)},g=function(e,t){return d.a.put("/products/".concat(e),t)},E=function(e){return d.a.delete("/products/".concat(e))},b=function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.abrupt("return",d.a.post("".concat(u,"/images"),n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){return d.a.get("/developers")},v=function(){return d.a.get("/promo")},L=function(e){return d.a.post("/images",e)},I=function(e){return d.a.post("/promo",e)},N=function(e,t){return d.a.put("/promo/".concat(e),t)},h=function(e){return d.a.delete("/promo/".concat(e))},j=function(e){return d.a.get("/promo/".concat(e))}},177:function(e,t,n){"use strict";var a=n(5),r=n(176);t.a={fetchProducts:function(){return function(e){e(a.a.productsRequest()),Object(r.g)().then((function(t){var n=t.data;return e(a.a.productsSuccess(n.products))})).catch((function(t){return e(a.a.productsError(t))}))}},fetchProductsByCategory:function(e){return function(t){t(a.a.byCategoryRequest()),Object(r.j)(e).then((function(e){var n=e.data;return t(a.a.byCategorySuccess(n.products))})).catch((function(e){return t(a.a.byCategoryError(e))}))}},fetchProductById:function(e){return function(t){t(a.a.byIdRequest()),Object(r.i)(e).then((function(e){var n=e.data;return t(a.a.byIdSuccess(n.product))})).catch((function(e){return t(a.a.byIdError(e))}))}},sendFile:function(e){return function(t){t(a.a.sendFileRequest()),Object(r.k)(e).then((function(e){var n=e.data;return t(a.a.sendFileSuccess(n.image.file))})).catch((function(e){return t(a.a.sendFileError(e))}))}},sendProduct:function(e){return function(t){t(a.a.sendProductRequest()),Object(r.l)(e).then((function(e){var n=e.data;return t(a.a.sendProductSuccess(n.product))})).catch((function(e){return t(a.a.sendProductError(e))}))}},getIngredients:function(){return function(e){e(a.a.getAllIngredientsRequest()),Object(r.f)().then((function(t){var n=t.data;return e(a.a.getAllIngredientsSuccess(n.ingredients))})).catch((function(t){return e(a.a.getAllIngredientsError(t))}))}},updateProduct:function(e,t){return function(n){n(a.a.updateProductRequest()),Object(r.p)(e,t).then((function(e){var t=e.data;return n(a.a.updateProductSuccess(t))})).catch((function(e){return n(a.a.updateProductError(e))}))}},deleteProduct:function(e){return function(t){t(a.a.deleteProductRequest()),Object(r.c)(e).then((function(e){var n=e.data;return t(a.a.deleteProductSuccess(n))})).catch((function(e){return t(a.a.deleteProductError(e))}))}},createNewIngredient:function(e){return function(t){t(a.a.createNewIngredientsRequest()),Object(r.a)(e).then((function(){return t(a.a.createNewIngredientsSuccess())})).catch((function(e){return t(a.a.createNewIngredientsError(e))}))}}}},187:function(e,t,n){e.exports={container:"adminUpdateListItemEdit_container__3HLuE",editCard:"adminUpdateListItemEdit_editCard__21bL0",editCard__image:"adminUpdateListItemEdit_editCard__image__3bGof",editForm:"adminUpdateListItemEdit_editForm__b5-qw",editCard__title:"adminUpdateListItemEdit_editCard__title__3FVGH",editCard__titleName:"adminUpdateListItemEdit_editCard__titleName__1ZB1V",editCard__titleLang:"adminUpdateListItemEdit_editCard__titleLang__3A86I",editForm__inputLang:"adminUpdateListItemEdit_editForm__inputLang__3aBBj",editCard__photoLabel:"adminUpdateListItemEdit_editCard__photoLabel__3AqSD",editForm__newIngredient:"adminUpdateListItemEdit_editForm__newIngredient__6e-8D",editForm__photo:"adminUpdateListItemEdit_editForm__photo__4go7p",editForm__photoBtn:"adminUpdateListItemEdit_editForm__photoBtn__1ruwQ",editForm__inputCategory:"adminUpdateListItemEdit_editForm__inputCategory__2OUAK",editForm__ingredientsSelect:"adminUpdateListItemEdit_editForm__ingredientsSelect__3EQkl",editForm__ingredient:"adminUpdateListItemEdit_editForm__ingredient__158s2",editForm__ingredientName:"adminUpdateListItemEdit_editForm__ingredientName__2-5zy",editForm__ingredientsList:"adminUpdateListItemEdit_editForm__ingredientsList__1zUdX",editForm__addIngredientBtn:"adminUpdateListItemEdit_editForm__addIngredientBtn__1uTV_",editForm__ingredientBtnDel:"adminUpdateListItemEdit_editForm__ingredientBtnDel__3l5GB",editForm__ingredientBtnDelImage:"adminUpdateListItemEdit_editForm__ingredientBtnDelImage__2hey5",editForm__inputNewIngredient:"adminUpdateListItemEdit_editForm__inputNewIngredient__22ySe",editForm__addNewIngredientBtn:"adminUpdateListItemEdit_editForm__addNewIngredientBtn__3Qe9z adminUpdateListItemEdit_editForm__addIngredientBtn__1uTV_",editForm__price:"adminUpdateListItemEdit_editForm__price__3l36G",editForm__priceInput:"adminUpdateListItemEdit_editForm__priceInput__2BURD",editForm__inputSinglePrice:"adminUpdateListItemEdit_editForm__inputSinglePrice__DZQgv",editForm__priceTitle:"adminUpdateListItemEdit_editForm__priceTitle__7VoSo",editForm__inputDescription:"adminUpdateListItemEdit_editForm__inputDescription__3l4iF",editForm__btnSubmit:"adminUpdateListItemEdit_editForm__btnSubmit__1COXz"}},220:function(e,t,n){e.exports={confirmation:"confirmationWindow_confirmation__28AqH",confirmation__form:"confirmationWindow_confirmation__form__2GV_L",confirmation__formText:"confirmationWindow_confirmation__formText__3sbbL",confirmation__formBtnLink:"confirmationWindow_confirmation__formBtnLink__28rjL",confirmation__formBtn:"confirmationWindow_confirmation__formBtn__1gOr1"}},241:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n(43),i=n(0),c=n.n(i),d=n(11),o=n(172),u=n(82),m=n(18),s=n(12),_=n(175),l=n(220),p=n.n(l),f=function(e){var t=e.massage,n=Object(d.d)(_.a.getError);return n&&(t=n),c.a.createElement("div",{className:p.a.confirmation},c.a.createElement("div",{className:p.a.confirmation__form},c.a.createElement("p",{className:p.a.confirmation__formText},t),c.a.createElement(s.b,{to:"/admin/update-product",className:p.a.confirmation__formBtnLink},c.a.createElement("button",{type:"button",className:p.a.confirmation__formBtn},c.a.createElement(o.a,{id:"return back"}))),"deleted product"===t.props.id||c.a.createElement("button",{type:"button",className:p.a.confirmation__formBtn,name:"continue"},c.a.createElement(o.a,{id:"continue editing"}))))},g=n(187),E=n.n(g),b=n(177),F=function(){var e=Object(d.c)(),t=Object(i.useState)(!1),n=Object(r.a)(t,2),a=n[0],u=n[1],m=Object(i.useState)(""),s=Object(r.a)(m,2),_=s[0],l=s[1],p=Object(i.useState)(""),g=Object(r.a)(p,2),F=g[0],v=g[1],L=Object(i.useState)(""),I=Object(r.a)(L,2),N=I[0],h=I[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{className:E.a.editForm__newIngredient},c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"update.createNewIngredient"})),c.a.createElement("div",{className:E.a.editCard__titleName},c.a.createElement("p",{className:E.a.editCard__titleLang},"ru"),c.a.createElement("input",{type:"text",value:_,onChange:function(e){return l(e.target.value)},className:E.a.editForm__inputLang}),c.a.createElement("p",{className:E.a.editCard__titleLang},"en"),c.a.createElement("input",{type:"text",value:N,onChange:function(e){return h(e.target.value)},className:E.a.editForm__inputLang}),c.a.createElement("p",{className:E.a.editCard__titleLang},"ukr"),c.a.createElement("input",{type:"text",value:F,onChange:function(e){return v(e.target.value)},className:E.a.editForm__inputLang})),c.a.createElement("button",{type:"button",onClick:function(){var t={name:{ru:_,en:N,ukr:F}};e(b.a.createNewIngredient(t)),u(!0)},className:E.a.editForm__addNewIngredientBtn},c.a.createElement(o.a,{id:"update.addNewIngredient"}))),c.a.createElement("div",{onClick:function(t){u(!1),t.target.name=e(b.a.getIngredients())}},a&&c.a.createElement(f,{massage:c.a.createElement(o.a,{id:"update.ingredientAdded"})})))},v=n(45),L=n(5),I=function(e){var t=e.productForEdit,n=Object(d.c)(),a=Object(d.d)((function(e){return e.local.lang})),m=Object(d.d)(_.a.getIngredients),s=m.map((function(e,t){return{label:e.name[a],value:t}})),l=Object(i.useState)(s[0]),p=Object(r.a)(l,2),f=p[0],g=p[1],b=Object(i.useState)(t.ingredients),F=Object(r.a)(b,2),I=F[0],N=F[1];Object(i.useEffect)((function(){n((function(e){return e(L.a.addIngredient(I))}))}),[I]);var h=function(e){e.preventDefault();var t=I.findIndex((function(t){return t._id===e.currentTarget.dataset.id})),n=Object(v.a)(I);n.splice(t,1),N(n)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"update.composition"})),c.a.createElement("ul",{className:E.a.editForm__ingredients},I.map((function(e,t){return c.a.createElement("li",{key:e._id,className:E.a.editForm__ingredient},c.a.createElement("span",{className:E.a.editForm__ingredientName},e.name[a]),c.a.createElement("button",{type:"button",onClick:h,"data-id":e._id,className:E.a.editForm__ingredientBtnDel},c.a.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",className:E.a.editForm__ingredientBtnDelImage},c.a.createElement("path",{d:"M11.25 1.8075L10.1925 0.75L6 4.9425L1.8075 0.75L0.75 1.8075L4.9425 6L0.75 10.1925L1.8075 11.25L6 7.0575L10.1925 11.25L11.25 10.1925L7.0575 6L11.25 1.8075Z",fill:"#272727"}))))}))),c.a.createElement("label",{className:E.a.editForm__ingredientsSelect},c.a.createElement(u.a,{options:s,value:f,onChange:function(e){return g(e)},className:E.a.editForm__ingredientsList}),c.a.createElement("button",{type:"button",onClick:function(){I.some((function(e){return m[f.value]._id===e._id}))||N((function(e){return[].concat(Object(v.a)(e),[m[f.value]])}))},className:E.a.editForm__addIngredientBtn},c.a.createElement(o.a,{id:"update.addToComposition"}))))},N=n(47);t.default=function(){var e=Object(d.c)(),t=Object(m.h)(),n=null;n=t.state?t.state.product:JSON.parse(sessionStorage.getItem("editedItem"));var s=Object(d.d)(_.a.addIngredient),l=Object(d.d)(_.a.getLoading),p=Object(d.d)(_.a.fileLink),g=Object(i.useState)(n.name.ru),v=Object(r.a)(g,2),L=v[0],h=v[1],j=Object(i.useState)(n.name.en),O=Object(r.a)(j,2),C=O[0],y=O[1],S=Object(i.useState)(n.name.ukr),w=Object(r.a)(S,2),k=w[0],U=w[1],B=Object(i.useState)({value:n.subcategory,label:n.subcategory}),P=Object(r.a)(B,2),x=P[0],D=P[1],z=Object(i.useState)(!1),T=Object(r.a)(z,2),q=T[0],R=T[1],A=Object(i.useState)(!1),V=Object(r.a)(A,2),G=V[0],W=V[1],X=Object(i.useState)(n.price.price),J=Object(r.a)(X,2),M=J[0],Q=J[1],H=Object(i.useState)({}),Z=Object(r.a)(H,2),K=Z[0],Y=Z[1],$=Object(i.useState)(n.price.M),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ae=Object(i.useState)(n.price.L),re=Object(r.a)(ae,2),ie=re[0],ce=re[1],de=Object(i.useState)(n.price.XL),oe=Object(r.a)(de,2),ue=oe[0],me=oe[1],se=Object(i.useState)(n.description),_e=Object(r.a)(se,2),le=_e[0],pe=_e[1];Object(i.useEffect)((function(){e(b.a.getIngredients())}),[]),Object(i.useEffect)((function(){"pizza"===n.categories?Y({M:te,L:ie,XL:ue}):Y({price:M})}),[te,ie,ue,M]);var fe=function(){var e={price:K,name:{ru:L,ukr:k,en:C},ingredients:s};return e.images=p||n.images,e.name={ru:L,ukr:k,en:C},e.categories=n.categories,e.subcategory=x.value,"pizza"!==n.categories&&(e.description=le),e};return window.addEventListener("unload",(function(){var e=Object(a.a)({_id:n._id},fe());sessionStorage.setItem("editedItem",JSON.stringify(e))})),c.a.createElement("div",{className:E.a.container},l?c.a.createElement("div",{className:E.a.editCard},c.a.createElement("img",{src:p||n.images,alt:n.closeUpImages,className:E.a.editCard__image}),c.a.createElement("form",{id:"editForm",onSubmit:function(t){t.preventDefault();var a=fe();!function(t,n){e(b.a.updateProduct(t,n))}(n._id,a),R(!0)},className:E.a.editForm},c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"photo"})),c.a.createElement("label",{className:E.a.editCard__photoLabel},c.a.createElement("input",{type:"file",accept:"image/*",onChange:function(t){var n;t.preventDefault(),n=t.target.files[0],e(b.a.sendFile(n))},className:E.a.editForm__photo}),c.a.createElement("p",{className:E.a.editForm__photoBtn},c.a.createElement(o.a,{id:"upload"}))),c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"product.name"})),c.a.createElement("div",{className:E.a.editCard__titleName},c.a.createElement("p",{className:E.a.editCard__titleLang},"ru"),c.a.createElement("input",{type:"text",value:L,onChange:function(e){return h(e.target.value)},className:E.a.editForm__inputLang}),c.a.createElement("p",{className:E.a.editCard__titleLang},"en"),c.a.createElement("input",{type:"text",value:C,onChange:function(e){return y(e.target.value)},className:E.a.editForm__inputLang}),c.a.createElement("p",{className:E.a.editCard__titleLang},"ukr"),c.a.createElement("input",{type:"text",value:k,onChange:function(e){return U(e.target.value)},className:E.a.editForm__inputLang})),c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"product.category"})),c.a.createElement("p",null,n.categories),"pizza"===n.categories&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"product.subcategory"})),c.a.createElement(u.a,{options:[{label:"classic",value:"classic"},{label:"branded",value:"branded"},{label:"premium",value:"premium"}],value:x,onChange:function(e){return D(e)}}),c.a.createElement(I,{productForEdit:n})),c.a.createElement(F,null),c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"product.price"})),"pizza"===n.categories?c.a.createElement("div",{className:E.a.editForm__price},c.a.createElement("h4",{className:E.a.editForm__priceTitle},"M"),c.a.createElement("input",{type:"text",value:te,onChange:function(e){return ne(e.target.value)},className:E.a.editForm__priceInput}),c.a.createElement("h4",{className:E.a.editForm__priceTitle},"L"),c.a.createElement("input",{type:"text",value:ie,onChange:function(e){return ce(e.target.value)},className:E.a.editForm__priceInput}),c.a.createElement("h4",{className:E.a.editForm__priceTitle},"XL"),c.a.createElement("input",{type:"text",value:ue,onChange:function(e){return me(e.target.value)},className:E.a.editForm__priceInput})):c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{type:"number",value:M,onChange:function(e){return Q(e.target.value)},className:E.a.editForm__inputSinglePrice}),c.a.createElement("p",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"volume weight"})),c.a.createElement("input",{type:"text",value:le,onChange:function(e){return pe(e.target.value)},className:E.a.editForm__inputDescription}))),c.a.createElement("button",{form:"editForm",type:"submit",name:"complete",className:E.a.editForm__btnSubmit},c.a.createElement(o.a,{id:"update.saveChanges"})),c.a.createElement("button",{form:"editForm",type:"submit",name:"delete",className:E.a.editForm__btnSubmit,onClick:function(t){t.preventDefault(),e(b.a.deleteProduct(n._id)),W(!0),R(!0)}},c.a.createElement(o.a,{id:"delete product"}))):c.a.createElement("div",{className:E.a.spinnerBack},c.a.createElement(N.a,null)),c.a.createElement("div",{onClick:function(){G||R(!1)}},l&&q&&c.a.createElement(f,{massage:G?c.a.createElement(o.a,{id:"deleted product"}):c.a.createElement(o.a,{id:"product updated"})})))}}}]);
//# sourceMappingURL=17.123959ca.chunk.js.map